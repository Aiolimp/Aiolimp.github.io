<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>CSS技巧篇(三)：变换与动画 | Aiolimp</title><meta name="author" content="Aiolimp"><meta name="copyright" content="Aiolimp"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="CSS技巧篇(三)：变换与动画变换变换分为2D变换和3D变换。2D变换在平面上操作，3D变换在空间上操作，2D和3D的概念相信很多同学都会了吧。变换可理解成将节点复制一份并生成新的图层，原节点隐藏，使用新节点进行变换操作。 声明transform-style可实现2D变换和3D变换间的切换，不同变换空间需使用对应的变换函数。当然transform-style需声明在父节点中，即需发生变换的节点的父">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS技巧篇(三)：变换与动画">
<meta property="og:url" content="http://aiolimp.com/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(%E4%B8%89)%EF%BC%9A%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB/index.html">
<meta property="og:site_name" content="Aiolimp">
<meta property="og:description" content="CSS技巧篇(三)：变换与动画变换变换分为2D变换和3D变换。2D变换在平面上操作，3D变换在空间上操作，2D和3D的概念相信很多同学都会了吧。变换可理解成将节点复制一份并生成新的图层，原节点隐藏，使用新节点进行变换操作。 声明transform-style可实现2D变换和3D变换间的切换，不同变换空间需使用对应的变换函数。当然transform-style需声明在父节点中，即需发生变换的节点的父">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://aiolimp.com/images/CSS.gif">
<meta property="article:published_time" content="2021-04-13T08:57:49.000Z">
<meta property="article:modified_time" content="2023-03-05T13:32:12.204Z">
<meta property="article:author" content="Aiolimp">
<meta property="article:tag" content="CSS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://aiolimp.com/images/CSS.gif"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://aiolimp.com/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(%E4%B8%89)%EF%BC%9A%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CSS技巧篇(三)：变换与动画',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-05 21:32:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Aiolimp" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-archive"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-folder-open"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-link"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Aiolimp"><span class="site-name">Aiolimp</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-archive"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-folder-open"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-link"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">CSS技巧篇(三)：变换与动画</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-04-13T08:57:49.000Z" title="发表于 2021-04-13 16:57:49">2021-04-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-05T13:32:12.204Z" title="更新于 2023-03-05 21:32:12">2023-03-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CSS/">CSS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CSS技巧篇(三)：变换与动画"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="CSS技巧篇-三-：变换与动画"><a href="#CSS技巧篇-三-：变换与动画" class="headerlink" title="CSS技巧篇(三)：变换与动画"></a>CSS技巧篇(三)：变换与动画</h1><h3 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h3><p>变换分为<code>2D变换</code>和<code>3D变换</code>。2D变换在平面上操作，3D变换在空间上操作，2D和3D的概念相信很多同学都会了吧。变换可理解成将节点复制一份并生成新的图层，原节点隐藏，使用新节点进行变换操作。</p>
<p>声明<code>transform-style</code>可实现<code>2D变换</code>和<code>3D变换</code>间的切换，不同变换空间需使用对应的变换函数。当然<code>transform-style</code>需声明在父节点中，即需发生变换的节点的父节点。</p>
<ul>
<li> <strong>flat</strong>：所有变换效果在平面上呈现(<code>默认</code>)</li>
<li> <strong>preserve-3d</strong>：所有变换效果在空间上呈现</li>
</ul>
<p>笔者已将<code>2D变换函数</code>和<code>3D变换函数</code>整理好，在不同变换空间使用对应的变换函数即可。</p>
<ul>
<li></li>
</ul>
<p>  translate()</p>
<p>  ：位移</p>
<ul>
<li><p> **translate(x,y)**：2D位移</p>
</li>
<li><p> **translate3d(x,y,z)**：3D位移</p>
</li>
<li><p> **translateX(x)**：X轴位移，等同于<code>translate(x,0)</code>或<code>translate3d(x,0,0)</code></p>
</li>
<li><p> **translateY(y)**：Y轴位移，等同于<code>translate(0,y)</code>或<code>translate3d(0,y,0)</code></p>
</li>
<li><p> **translateZ(z)**：Z轴位移，等同于<code>translate3d(0,0,z)</code></p>
</li>
<li><p>描述</p>
<ul>
<li>单位：<code>Length</code>长度，可用任何长度单位，允许负值</li>
<li>默认：XYZ轴不声明默认是<code>0</code></li>
<li>正值：沿X轴向右位移/沿Y轴向上位移/沿Z轴向外位移</li>
<li>负值：沿X轴向左位移/沿Y轴向下位移/沿Z轴向内位移</li>
</ul>
</li>
<li></li>
</ul>
<p>  scale()</p>
<p>  ：缩放</p>
<ul>
<li><p> **scale(x,y)**：2D缩放</p>
</li>
<li><p> **scale3d(x,y,z)**：3D缩放</p>
</li>
<li><p> **scaleX(x)**：X轴缩放，等同于<code>scale(x,1)</code>或<code>scale3d(x,1,1)</code></p>
</li>
<li><p> **scaleY(y)**：Y轴缩放，等同于<code>scale(1,y)</code>或<code>scale3d(1,y,1)</code></p>
</li>
<li><p> **scaleZ(z)**：Z轴缩放，等同于<code>scale3d(1,1,z)</code></p>
</li>
<li><p>描述</p>
<ul>
<li>单位：<code>Number</code>数值或<code>Percentage</code>百分比，允许负值</li>
<li>默认：XYZ轴不声明默认是<code>1</code>或<code>100%</code></li>
<li>正值：<code>0&lt;(x,y,z)&lt;1</code>沿X轴缩小/沿Y轴缩小/沿Z轴变厚，<code>(x,y,z)&gt;1</code>沿X轴放大/沿Y轴放大/沿Z轴变薄</li>
<li>负值：<code>-1&lt;(x,y,z)&lt;0</code>翻转沿X轴缩小/沿Y轴缩小/沿Z轴变厚，<code>(x,y,z)&lt;-1</code>翻转沿X轴放大/沿Y轴放大/沿Z轴变薄</li>
</ul>
</li>
<li></li>
</ul>
<p>  skew()</p>
<p>  ：扭曲</p>
<ul>
<li><p> **skew(x,y)**：2D扭曲</p>
</li>
<li><p> **skewX(x)**：X轴扭曲，等同于<code>skew(x,0)</code></p>
</li>
<li><p> **skewY(y)**：Y轴扭曲，等同于<code>skew(0,y)</code></p>
</li>
<li><p>描述</p>
<ul>
<li>单位：<code>Angle</code>角度或<code>Turn</code>周</li>
<li>默认：XY轴不声明默认是<code>0</code></li>
<li>正值：沿X轴向左扭曲/沿Y轴向下扭曲</li>
<li>负值：沿X轴向右扭曲/沿Y轴向上扭曲</li>
</ul>
</li>
<li></li>
</ul>
<p>  rotate()</p>
<p>  ：旋转</p>
<ul>
<li><p> **rotate()**：2D旋转</p>
</li>
<li><p> **rotate3d(x,y,z,a)**：3D旋转，<code>[x,y,z]</code>是一个向量，数值都是<code>0~1</code></p>
</li>
<li><p> **rotateX(a)**：X轴旋转，等同于<code>rotate(1,0,0,a)</code>，正值时沿X轴向上逆时针旋转，负值时沿X轴向下顺时针旋转</p>
</li>
<li><p> **rotateY(a)**：3D Y轴旋转，等同于<code>rotate(0,1,0,a)</code>，正值时沿Y轴向右逆时针旋转，负值时沿Y轴向左顺时针旋转</p>
</li>
<li><p> **rotateZ(a)**：3D Z轴旋转，等同于<code>rotate(0,0,1,a)</code>，正值时沿Z轴顺时针旋转，负值时沿Z轴逆时针旋转</p>
</li>
<li><p>描述</p>
<ul>
<li>单位：<code>Angle</code>角度或<code>Turn</code>周</li>
<li>正值：2D旋转时顺时针旋转</li>
<li>负值：2D旋转时逆时针旋转</li>
</ul>
</li>
<li></li>
</ul>
<p>  matrix()</p>
<p>  ：矩阵(</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">太过复杂，可放弃</span><br></pre></td></tr></table></figure>

<p>  )</p>
<ul>
<li><p> **matrix(a,b,c,d,e,f)**：2D矩阵(位移、缩放、扭曲、旋转的综合函数)</p>
</li>
<li><p> **matrix(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)**：3D矩阵(位移、缩放、扭曲、旋转的综合函数)</p>
</li>
<li></li>
</ul>
<p>  perspective()</p>
<p>  ：视距</p>
<ul>
<li><code>Length</code>：长度，可用任何长度单位</li>
</ul>
<p><code>transform</code>的使用场景很多，不局限于某种特定场景，若结合<code>transition</code>和<code>animation</code>使用还必须注意性能问题。</p>
<blockquote>
<p>多值执行顺序</p>
</blockquote>
<p>与<code>backgound</code>和<code>mask</code>一致可声明多重效果，使用<code>逗号</code>隔开。网上很多结论说<code>transform</code>多值执行顺序是<code>从左到右</code>或<code>从右到左</code>，其实这样的结论都是比较笼统的。正确来说并无执行上的先后顺序, 而是由多个变换对应的矩阵相乘, 再拿该矩阵去乘以坐标，最终得出变换效果。</p>
<p>例如<code>transform:translate(150px,0),rotate(45deg)</code>和<code>transform:rotate(45deg),translate(150px,0)</code>，最终的变换效果就有所不同。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a3851be62304907bc11da4b95752507~tplv-k3u1fbpfcp-zoom-1.image" alt="多值执行顺序"></p>
<ul>
<li>第一种：先往右位移<code>150px</code>，坐标轴不变；再顺时针旋转<code>45deg</code>，坐标轴顺时针旋转<code>45deg</code></li>
<li>第二种：先顺时针旋转<code>45deg</code>，坐标轴顺时针旋转<code>45deg</code>；再往右位移<code>150px</code>，坐标轴不变</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f66</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &amp;<span class="selector-class">.transform-1</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: translate(<span class="number">150px</span>, <span class="number">0</span>) rotate(<span class="number">45deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.transform-2</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: rotate(<span class="number">45deg</span>) translate(<span class="number">150px</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正确的理解是<code>从左到右</code>，但还得注意坐标轴是否发生了变化，若坐标轴发生了变化，会影响到后续的变换效果。<strong>优先考虑坐标轴的变化，先分析出前后<code>缩放旋转</code>的变化，再分析出前后<code>位移扭曲</code>的变化</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">缩放和旋转都能让坐标轴发生变化，这个必须谨记</span><br></pre></td></tr></table></figure>

<blockquote>
<p>视距效果</p>
</blockquote>
<p><code>transform:perspective()</code>也可通过<code>perspective</code>声明，这个属性在开启3D变换后最好声明上，否则有些3D变换效果可能无法得到更好的展现。</p>
<ul>
<li>值越小，用户与空间Z轴距离越近，视觉效果越强</li>
<li>值越大，用户与空间Z轴距离越远，视觉效果越弱</li>
</ul>
<blockquote>
<p>perspective/perspective()区别</p>
</blockquote>
<p><code>perspective</code>和<code>transform:perspective()</code>都能声明视距，那为何要存在两种声明方式呢？当然是有它们的区别所以才能存在呀。</p>
<ul>
<li><code>perspective</code>与<code>transform:perspective()</code>的作用相同</li>
<li><code>perspective</code>在<code>舞台节点</code>(变换节点的父节点)上使用，<code>transform:perspective()</code>在<code>当前变换节点</code>上使用，也可与其他变换函数一起使用</li>
</ul>
<blockquote>
<p>GPU硬件加速模式</p>
</blockquote>
<p>有无发现即使很简单的动画，有时都能引起卡顿，特别是在移动端上尤其明显。在此介绍一种Hack方式，为节点声明<code>transform:translate3d()</code>或<code>transform:translateZ()</code>，这两个声明都会开启<strong>GPU硬件加速模式</strong>，从而让浏览器在渲染动画时从CPU转向GPU，实现硬件加速。</p>
<p><code>transform:translate3d()</code>和<code>transform:translateZ()</code>其实是为了渲染3D样式，但声明为<code>0</code>后并无真正使用3D效果，但浏览器却因此开启了GPU硬件加速模式。在<code>Webkit内核</code>下使用<code>transform:translate3d()</code>加速效果会更明显。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 或 */</span></span><br><span class="line"><span class="selector-class">.elem</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在使用该方案时可能会出现诡异的缺陷。当有多个绝对定位的节点声明<code>transform:translate3d()</code>开启GPU硬件加速模式后会有几个节点凭空消失，是不是很诡异。这种现象不能完全解决，只能尽量避免。</p>
<ul>
<li>尽量不要对节点及其父节点声明<code>position:absolute/fixed</code>，当然这个很难避免不使用</li>
<li>减少声明<code>transform:translate3d()</code>的节点数量，减少至6个以下即可</li>
<li>声明<code>will-change</code>代替<code>transform:translate3d()</code>，详情请戳<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000020926189">这里</a></li>
</ul>
<p>笔者比较推荐第二种方式，节点的数量可通过JS动态控制，保持在6个以下。而<code>will-change</code>会存在另一些问题，大量使用还是会引发更严重的性能问题，笔者后续会在本章更新详细的分析。</p>
<h5 id="动感心形"><a href="#动感心形" class="headerlink" title="动感心形"></a>动感心形</h5><p><code>transform</code>有一个很实用的场景，就是通过<code>transform:translate()</code>补位。<strong>补位</strong>指实现效果的最终位置还差一点距离就能完成，通过<code>margin</code>或<code>transform:translate()</code>将该距离补充完整，将节点调整到最终位置。</p>
<p>还记得第6章<strong>布局方式</strong>的居中布局吗？有一种方式就是通过<code>transform:translate(-50%,-50%)</code>将节点拉回最中央，节点无需声明位移的距离是宽高的二分之一，使用<code>50%</code>自动计算其距离为宽高的二分之一即可。</p>
<p>描绘一个心形虽然不是一个很常用的场景，作为一名雄性程序猿，<code>214</code>和<code>520</code>等具有示爱性质的节日，当然少不了用纯CSS描绘一个动感心形啦。</p>
<p>使用单个<code>&lt;div&gt;</code>结合两个伪元素<code>::before</code>和<code>::after</code>通过错位叠加的方式合并成一个心形。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/afcd1fed26dc49d580e7bd3be0fe25c3~tplv-k3u1fbpfcp-zoom-1.image" alt="动感心形-1"></p>
<ul>
<li>声明<code>&lt;div&gt;</code>的尺寸为一个<code>正方形</code>并以中心顺时针旋转<code>45deg</code></li>
<li>声明两个伪元素继承<code>&lt;div&gt;</code>的尺寸并实行绝对定位</li>
<li>声明两个伪元素的圆角率为<code>100%</code>并平移到相应位置</li>
</ul>
<p>巧妙利用了<code>transform</code>将两个伪元素平移到相应位置产生叠加错觉。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7728b943ab574255b0bd124a6872b4d9~tplv-k3u1fbpfcp-zoom-1.image" alt="动感心形"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;heart-shape&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">.heart-shape &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">    background-color: #f66;</span><br><span class="line">    transform: rotate(45deg);</span><br><span class="line">    &amp;::before,</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 0;</span><br><span class="line">        top: 0;</span><br><span class="line">        border-radius: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        background-color: #f66;</span><br><span class="line">        content: &quot;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">        transform: translateX(-50%);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">        transform: translateY(-50%);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="像素边框"><a href="#像素边框" class="headerlink" title="像素边框"></a>像素边框</h5><p><code>1px边框</code>在桌面端网站看上去没什么大问题，但在移动端网站看上去却觉得很粗。由于大部分移动端都具有细腻的屏幕，像iPhone的<code>Retina屏幕</code>，一个像素可由4个点或9个点组成，在接近视网膜极限的情况下，<code>1px边框</code>看起来确实会有点粗。</p>
<p>那么可声明<code>0.5px边框</code>吗。答案是可行的，即使声明成功，但有些浏览器还是按照<code>1px</code>的值去渲染，这样就导致不同设备的边框参差不齐了。</p>
<p>换个思路，使用一个伪元素的边框去当作节点边框，声明<code>border</code>为<code>1px</code>并将其宽高声明成<code>200%</code>，最终效果是该节点的2倍大小，再通过声明<code>transform:scale(.5)</code>将该伪元素缩小到原来的<code>0.5倍</code>，现在和节点尺寸一致了，而<code>border</code>也通过浏览器自动计算成<code>0.5px</code>了，最终实现<code>0.5px边框</code>。其实现原理就是将边框宽度计算交由浏览器处理。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81e8c3386708474f892348668c3f4d5c~tplv-k3u1fbpfcp-zoom-1.image" alt="像素边框"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;onepx-border normal&quot;</span>&gt;</span>1px<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;onepx-border thin&quot;</span>&gt;</span>0.5px<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">.onepx-border &#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 80px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    line-height: 80px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    font-size: 50px;</span><br><span class="line">    color: #f66;</span><br><span class="line">    &amp; + .onepx-border &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.normal &#123;</span><br><span class="line">        border: 1px solid #f66;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.thin &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        &amp;::after &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">            border: 1px solid #f66;</span><br><span class="line">            width: 200%;</span><br><span class="line">            height: 200%;</span><br><span class="line">            content: &quot;&quot;;</span><br><span class="line">            transform: scale(.5);</span><br><span class="line">            transform-origin: left top;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="内容翻转"><a href="#内容翻转" class="headerlink" title="内容翻转"></a>内容翻转</h5><p>遇到一些内容翻转的场景，有些同学可能会声明<code>transform:rotate3d()</code>将内容沿着Y轴旋转<code>180deg</code>水平翻转。</p>
<p>其实可声明<code>transform:scale()</code>为负值将内容直接翻转，细心的同学应该注意到上述有谈到。</p>
<ul>
<li>水平翻转：<code>transform:scale(1,-1)</code></li>
<li>垂直翻转：<code>transform:scale(-1,1)</code></li>
<li>倒序翻转：<code>transform:scale(-1,-1)</code></li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/29f8917130d740dfbbce40fc78a02d5b~tplv-k3u1fbpfcp-zoom-1.image" alt="内容翻转"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;flip-content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>正常文本<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;x-axis&quot;</span>&gt;</span>水平翻转<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;y-axis&quot;</span>&gt;</span>垂直翻转<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;reverse&quot;</span>&gt;</span>倒序翻转<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">.flip-content &#123;</span><br><span class="line">    li &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        width: 121px;</span><br><span class="line">        height: 51px;</span><br><span class="line">        line-height: 51px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        color: #f66;</span><br><span class="line">        &amp;::before,</span><br><span class="line">        &amp;::after &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            background-color: #66f;</span><br><span class="line">            content: &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp; + li &#123;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;.x-axis &#123;</span><br><span class="line">            transform: scale(1, -1);</span><br><span class="line">            &amp;::after &#123;</span><br><span class="line">                left: 0;</span><br><span class="line">                top: 25px;</span><br><span class="line">                width: 100%;</span><br><span class="line">                height: 1px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;.y-axis &#123;</span><br><span class="line">            transform: scale(-1, 1);</span><br><span class="line">            &amp;::after &#123;</span><br><span class="line">                left: 60px;</span><br><span class="line">                top: 0;</span><br><span class="line">                width: 1px;</span><br><span class="line">                height: 100%;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;.reverse &#123;</span><br><span class="line">            transform: scale(-1, -1);</span><br><span class="line">            &amp;::before &#123;</span><br><span class="line">                left: 0;</span><br><span class="line">                top: 25px;</span><br><span class="line">                width: 100%;</span><br><span class="line">                height: 1px;</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;::after &#123;</span><br><span class="line">                left: 60px;</span><br><span class="line">                top: 0;</span><br><span class="line">                width: 1px;</span><br><span class="line">                height: 100%;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h3><p>有时在不同状态间切换属性可能会显得很生硬，此时<code>transition</code>就派上用场了，它能让状态间的切换变得更丝滑。</p>
<ul>
<li></li>
</ul>
<p>  transition-property</p>
<p>  ：属性</p>
<ul>
<li><p><code>all</code>：全部属性过渡(<code>默认</code>)</p>
</li>
<li><p><code>none</code>：无属性过渡</p>
</li>
<li><p><code>String</code>：某个属性过渡</p>
</li>
<li></li>
</ul>
<p>  transition-duration</p>
<p>  ：时间</p>
<ul>
<li><p><code>Time</code>：秒或毫秒(默认<code>0</code>)</p>
</li>
<li></li>
</ul>
<p>  transition-timing-function</p>
<p>  ：缓动函数</p>
<ul>
<li><p><code>ease</code>：逐渐变慢，等同于<code>cubic-bezier(.25,.1,.25,1)</code>(<code>默认</code>)</p>
</li>
<li><p><code>linear</code>：匀速，等同于<code>cubic-bezier(0,0,1,1)</code></p>
</li>
<li><p><code>ease-in</code>：加速，等同于<code>cubic-bezier(.42,0,1,1)</code></p>
</li>
<li><p><code>ease-out</code>：减速，等同于<code>cubic-bezier(0,0,.58,1)</code></p>
</li>
<li><p><code>ease-in-out</code>：先加速后减速，等同于<code>cubic-bezier(.42,0,.58,1)</code></p>
</li>
<li><p><code>cubic-bezier</code>：贝塞尔曲线，<code>(x1,y1,x2,y2)</code>四个值特定于曲线上的点<code>P1</code>和<code>P2</code>，所有值需在<code>[0,1]</code>区域内</p>
</li>
<li></li>
</ul>
<p>  transition-delay</p>
<p>  ：时延</p>
<ul>
<li><code>Time</code>：秒或毫秒(默认<code>0</code>)</li>
</ul>
<p>总体来说，<code>transition</code>可用到所有可能发生属性变更的节点上，但有一些情况是绝对不能使用的。<code>transition</code>延缓某些属性的变更过程，若通过<code>鼠标事件</code>给某个节点属性赋值，会导致属性在变更过程中发生卡顿。</p>
<p>例如通过鼠标的<code>mousemove</code>事件将<code>top</code>从<code>10px</code>变更到<code>20px</code>。由于声明了<code>transition:300ms</code>，那么从<code>10px</code>变更到<code>11px</code>时会将该过程延缓<code>300ms</code>，导致了该过程的执行时长是<code>300ms</code>，而此刻想要的效果是瞬间从<code>10px</code>变更到<code>11px</code>，再依次变更到<code>20px</code>。整个过程是鼠标移动就立刻赋值，这样才能实时显示<code>top</code>的变化，而声明了<code>transition</code>反而起到副作用导致看上去很卡顿。</p>
<p>由于<code>duration</code>和<code>delay</code>的取值都是时间，所以可能会发生混淆。</p>
<ul>
<li><code>duration</code>和<code>delay</code>作用于所有节点，包括自身的<code>::before</code>和<code>::after</code></li>
<li><code>transition</code>中出现两个时间值时，第一个解析为<code>duration</code>，第二个解析为<code>delay</code></li>
<li><code>transition</code>中出现一个时间值时，解析为<code>duration</code></li>
</ul>
<p>缓动函数其实就是<strong>贝塞尔曲线</strong>，相关原理可自行百度。推荐一个设置缓动函数形状的网站<a target="_blank" rel="noopener" href="https://cubic-bezier.com/">CubicBezier</a>，可根据需求设置想要的缓动函数。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46ed7cd086894bda9537555b6ed5029d~tplv-k3u1fbpfcp-zoom-1.image" alt="缓动函数"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a835669acd744637b7ef4808cce0dade~tplv-k3u1fbpfcp-zoom-1.image" alt="切换按钮"></p>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>上述<code>transform</code>能让节点拥有更多形态，而<code>animation</code>能让节点拥有更多状态。正是有了<code>animation</code>，所以才让交互效果更精彩。</p>
<p>CSS动画可通过设置多个点精确控制一个或一组动画，用来实现复杂的动画效果。</p>
<p>动画由多个点组成，每个点拥有独立的状态，这些状态通过浏览器处理成过渡效果，点与点间的过渡效果串联起来就是一个完整的动画。</p>
<p><code>animation</code>可声明的两种动画，每种动画各有自身特点。</p>
<ul>
<li> <strong>关键帧动画</strong>：在时间轴的关键帧上绘制关键状态并使之有效过渡组成动画</li>
<li> <strong>逐帧动画</strong>：在时间轴的每一帧上绘制不同内容并使之连续播放组成动画</li>
</ul>
<p><code>关键帧动画</code>可看作是一个连续的动画片段，<code>逐帧动画</code>可看作是一个断续的动画片段，两种动画都是通过时间流逝将多个动画片段串联在一起。浏览器可将关键帧动画的关键帧自动过渡成片段，而将逐帧动画的每一帧按顺序播放成片段，可认为逐帧动画是一个<code>GIF</code>。</p>
<ul>
<li></li>
</ul>
<p>  animation-name</p>
<p>  ：名称</p>
<ul>
<li><p><code>none</code>：无动画(<code>默认</code>)</p>
</li>
<li><p><code>String</code>：动画名称</p>
</li>
<li></li>
</ul>
<p>  animation-duration</p>
<p>  ：时间</p>
<ul>
<li><p><code>Time</code>：秒或毫秒(默认<code>0</code>)</p>
</li>
<li></li>
</ul>
<p>  animation-timing-function</p>
<p>  ：缓动函数</p>
<ul>
<li><p><code>ease</code>：逐渐变慢，等同于<code>cubic-bezier(.25,.1,.25,1)</code>(<code>默认</code>)</p>
</li>
<li><p><code>linear</code>：匀速，等同于<code>cubic-bezier(0,0,1,1)</code></p>
</li>
<li><p><code>ease-in</code>：加速，等同于<code>cubic-bezier(.42,0,1,1)</code></p>
</li>
<li><p><code>ease-out</code>：减速，等同于<code>cubic-bezier(0,0,.58,1)</code></p>
</li>
<li><p><code>ease-in-out</code>：先加速后减速，等同于<code>cubic-bezier(.42,0,.58,1)</code></p>
</li>
<li><p><code>cubic-bezier</code>：贝塞尔曲线，<code>(x1,y1,x2,y2)</code>四个值特定于曲线上的点<code>P1</code>和<code>P2</code>，所有值需在<code>[0,1]</code>区域内</p>
</li>
<li><p><code>steps([,[start|end]]?)</code>：把动画平均划分成<code>n等分</code>，直到平均走完该动画</p>
</li>
<li><p><code>step-start</code>：等同于<code>steps(1,start)</code>，把动画分成一步，动画执行时以左侧端点<code>0%</code>为开始</p>
</li>
<li><p><code>step-end</code>：等同于<code>steps(1,end)</code>，把动画分成一步，动画执行时以右侧端点<code>100%</code>为开始</p>
</li>
<li></li>
</ul>
<p>  animation-delay</p>
<p>  ：时延</p>
<ul>
<li><p><code>Time</code>：秒或毫秒(默认<code>0</code>)</p>
</li>
<li></li>
</ul>
<p>  animation-iteration-count</p>
<p>  ：播放次数</p>
<ul>
<li><p><code>Number</code>：数值(默认<code>1</code>)</p>
</li>
<li><p><code>infinite</code>：无限次</p>
</li>
<li></li>
</ul>
<p>  animation-direction</p>
<p>  ：轮流反向播放(播放次数为一次则该属性无效果)</p>
<ul>
<li><p><code>normal</code>：正常播放(<code>默认</code>)</p>
</li>
<li><p><code>alternate</code>：轮流反向播放，奇数次数正常播放，偶数次数反向播放</p>
</li>
<li></li>
</ul>
<p>  animation-play-state</p>
<p>  ：播放状态</p>
<ul>
<li><p><code>running</code>：正在播放(<code>默认</code>)</p>
</li>
<li><p><code>paused</code>：暂停播放</p>
</li>
<li></li>
</ul>
<p>  animation-fill-mode</p>
<p>  ：播放前后其效果是否可见</p>
<ul>
<li><code>none</code>：不改变默认行为(<code>默认</code>)</li>
<li><code>backwards</code>：在时延所指定时间内或在动画开始前应用开始属性(<code>在第一个关键帧中定义</code>)</li>
<li><code>forwards</code>：在动画结束后保持最后一个属性(<code>在最后一个关键帧中定义</code>)</li>
<li><code>both</code>：向前和向后填充模式都被应用</li>
</ul>
<p>关键帧动画必须通过<code>animation</code>和<code>@keyframes</code>声明，逐帧动画只能通过<code>animation-timing-function:steps()</code>声明。总体来说，逐帧动画的声明比较简单，可用一张<code>逐帧长图</code>完成整个动画效果，而关键帧动画需结合<code>@keyframes</code>为每个关键帧声明当前对应的状态，若涉及的点较多，可能比较繁琐。</p>
<blockquote>
<p>关键帧动画声明步骤</p>
</blockquote>
<ul>
<li>在<code>@keyframes</code>里声明动画名称和动画每个关键帧的状态</li>
<li>动画名称不能重复否则会被覆盖，关键帧通过百分比分割出每个关键帧并声明对应的状态</li>
<li>在指定节点中声明<code>animation</code>调用动画</li>
</ul>
<blockquote>
<p>逐帧动画声明步骤</p>
</blockquote>
<ul>
<li>准备一张<code>逐帧长图</code>，该图像包含动画效果的每一帧且每帧宽高必须一致</li>
<li>在<code>steps()</code>里声明逐帧长图及其展示方式</li>
<li>在指定节点中声明<code>animation</code>调用动画</li>
</ul>
<blockquote>
<p>@keyframes注意事项</p>
</blockquote>
<p>关键帧动画的声明通过<code>@keyframes</code>完成，编写形式如下。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> animation-name &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;&#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 或 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> animation-name &#123;</span><br><span class="line">    p1 &#123;&#125;</span><br><span class="line">    p2 &#123;&#125;</span><br><span class="line">    p3 &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关键帧的取值必须是<code>from</code>、<code>to</code>或<code>Percentage</code>。<code>from</code>可用<code>0%</code>代替，<code>to</code>可用<code>100%</code>代替，若开始或结束的关键帧无对应的状态，可不用声明<code>from</code>或<code>to</code>。<code>0%</code>的<code>%</code>不能省略，否则关键帧解析会失败。</p>
<p>后面声明的关键帧状态会覆盖前面声明的关键帧状态，动画结束后会回到<code>animation-fill-mode</code>声明的状态。</p>
<h5 id="自动打字器"><a href="#自动打字器" class="headerlink" title="自动打字器"></a>自动打字器</h5><p>很多在线编辑器网站都有一些自动打字的效果，例如<a target="_blank" rel="noopener" href="https://codepen.io/JowayYoung">CodePen</a>。很多同学都以为是JS实现的效果，其实查看<code>Chrome Devtools</code>发现是纯CSS实现的。观察多几次自动打字器，可发现其存在以下特点。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9df260b9292418f99aebcdf4f1b2599~tplv-k3u1fbpfcp-zoom-1.image" alt="自动打字器"></p>
<ul>
<li>字体都是等宽字体，等宽字体可保证每次打字时光标的移动距离都是一致的</li>
<li>打字器的宽度由最初的<code>0px</code>逐渐增加内容后变成最终固定字数的宽度，宽度以等宽字体的个数为准</li>
<li>光标随着每打一个字就闪烁一次，打字速度均匀，打字完成后再次重复打字</li>
<li>整个打字过程存在两个动画，一个是打字器自增宽度，一个是光标闪烁</li>
<li>整个打字过程一闪一闪地完成，根据其断断续续的特点可判断该动画为逐帧动画</li>
</ul>
<p>还记得第5章<strong>样式计算</strong>的长度单位吗？有一个叫做<code>ch</code>的长度单位，它是一个等宽字体的特有长度单位，准确宽度为<code>0</code>的宽度。因此一个等宽字体就是<code>1ch</code>，两个等宽字体就是<code>2ch</code>。通过等宽字体个数定制打字器长度最合适不过了，而常用的设备自带等宽字体有<code>Consolas</code>、<code>Monaco</code>和<code>Monospace</code>三种。</p>
<p><code>打字器自增宽度</code>可用<code>0px</code>到等宽字体指定个数的宽度<code>nch</code>为一个自增周期，使用动画完成其自增过程即可。</p>
<p><code>光标闪烁</code>可用<code>border-right</code>模拟，具体形象现在可脑补一下，有无想出什么效果？节点里包含文本，在最右边声明<code>border-right</code>，那不就是一个具有静态光标的输入状态吗？文本右边就是光标，很符合常理，为<code>border-right</code>声明一个闪烁动画即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;auto-typing&quot;</span>&gt;</span>Do You Want To Know More About CSS Development Skill<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">@mixin typing($count: 0, $duration: 0, $delay: 0) &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    border-right: 1px solid transparent;</span><br><span class="line">    width: #&#123;$count + 1&#125;ch;</span><br><span class="line">    font-family: Consolas, Monaco, monospace;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    animation: typing #&#123;$duration&#125;s steps($count + 1) #&#123;$delay&#125;s infinite backwards,</span><br><span class="line">        caret 500ms steps(1) #&#123;$delay&#125;s infinite forwards;</span><br><span class="line">&#125;</span><br><span class="line">.auto-typing &#123;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    font-size: 30px;</span><br><span class="line">    color: #09f;</span><br><span class="line">    @include typing(52, 5);</span><br><span class="line">&#125;</span><br><span class="line">@keyframes caret &#123;</span><br><span class="line">    50% &#123;</span><br><span class="line">        border-right-color: currentColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes typing &#123;</span><br><span class="line">    from &#123;</span><br><span class="line">        width: 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://Aiolimp.com">Aiolimp</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://aiolimp.com/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(%E4%B8%89)%EF%BC%9A%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB/">http://aiolimp.com/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(%E4%B8%89)%EF%BC%9A%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://Aiolimp.com" target="_blank">Aiolimp</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CSS/">CSS</a></div><div class="post_share"><div class="social-share" data-image="/images/CSS.gif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(2)%EF%BC%9A%E9%98%B4%E5%BD%B1%E4%B8%8E%E6%BB%A4%E9%95%9C/" title="CSS技巧篇(二)：阴影和滤镜"><img class="cover" src="/images/CSS.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CSS技巧篇(二)：阴影和滤镜</div></div></a></div><div class="next-post pull-right"><a href="/2021/04/12/CSS%E6%B5%AE%E5%8A%A8%E4%B8%8E%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/" title="CSS浮动与清除浮动"><img class="cover" src="https://static001.geekbang.org/resource/image/bd/47/bdce168820c080adbcbee78b02292f47.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CSS浮动与清除浮动</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/04/23/BFC_IFC_GFC_FFC/" title="BFC_IFC_GFC_FFC"><img class="cover" src="https://static001.geekbang.org/resource/image/bd/47/bdce168820c080adbcbee78b02292f47.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-23</div><div class="title">BFC_IFC_GFC_FFC</div></div></a></div><div><a href="/2021/04/13/CSS%E5%85%83%E7%B4%A0%E9%9A%90%E8%97%8F/" title="CSS元素隐藏"><img class="cover" src="https://static001.geekbang.org/resource/image/cb/8d/cb4a6ded3cdc7c0eb6a7e3879567f08d.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-13</div><div class="title">CSS元素隐藏</div></div></a></div><div><a href="/2021/04/13/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(2)%EF%BC%9A%E9%98%B4%E5%BD%B1%E4%B8%8E%E6%BB%A4%E9%95%9C/" title="CSS技巧篇(二)：阴影和滤镜"><img class="cover" src="/images/CSS.gif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-13</div><div class="title">CSS技巧篇(二)：阴影和滤镜</div></div></a></div><div><a href="/2021/04/12/CSS%E6%B5%AE%E5%8A%A8%E4%B8%8E%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/" title="CSS浮动与清除浮动"><img class="cover" src="https://static001.geekbang.org/resource/image/bd/47/bdce168820c080adbcbee78b02292f47.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-12</div><div class="title">CSS浮动与清除浮动</div></div></a></div><div><a href="/2021/04/11/CSS%E6%8A%80%E5%B7%A7%E7%AF%87(%E4%B8%80)%EF%BC%9A%E8%83%8C%E6%99%AF%E4%B8%8E%E9%81%AE%E7%BD%A9/" title="CSS技巧篇(一)：背景与遮罩"><img class="cover" src="/images/CSS.gif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-11</div><div class="title">CSS技巧篇(一)：背景与遮罩</div></div></a></div><div><a href="/2022/10/21/Less/" title="Less"><img class="cover" src="https://static001.geekbang.org/resource/image/37/e4/37fbe168a471e8ee1267fd741d096fe4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-21</div><div class="title">Less</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Aiolimp</div><div class="author-info__description">生如长河,渡船千艘</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Aiolimp" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CSS%E6%8A%80%E5%B7%A7%E7%AF%87-%E4%B8%89-%EF%BC%9A%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB"><span class="toc-number">1.</span> <span class="toc-text">CSS技巧篇(三)：变换与动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E6%8D%A2"><span class="toc-number">1.0.1.</span> <span class="toc-text">变换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%84%9F%E5%BF%83%E5%BD%A2"><span class="toc-number">1.0.1.0.1.</span> <span class="toc-text">动感心形</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%83%8F%E7%B4%A0%E8%BE%B9%E6%A1%86"><span class="toc-number">1.0.1.0.2.</span> <span class="toc-text">像素边框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E7%BF%BB%E8%BD%AC"><span class="toc-number">1.0.1.0.3.</span> <span class="toc-text">内容翻转</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%B8%A1"><span class="toc-number">1.0.2.</span> <span class="toc-text">过渡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB"><span class="toc-number">1.0.3.</span> <span class="toc-text">动画</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%89%93%E5%AD%97%E5%99%A8"><span class="toc-number">1.0.3.0.1.</span> <span class="toc-text">自动打字器</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/05/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="JavaScript数据类型"><img src="https://static001.geekbang.org/resource/image/13/6b/13daccec5e12c89ea63e8c51dd20cb6b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript数据类型"/></a><div class="content"><a class="title" href="/2023/03/05/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="JavaScript数据类型">JavaScript数据类型</a><time datetime="2023-03-05T13:32:12.207Z" title="发表于 2023-03-05 21:32:12">2023-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/01/three/" title="three.js物体基本操作"><img src="https://static001.geekbang.org/resource/image/37/e4/37fbe168a471e8ee1267fd741d096fe4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="three.js物体基本操作"/></a><div class="content"><a class="title" href="/2022/11/01/three/" title="three.js物体基本操作">three.js物体基本操作</a><time datetime="2022-11-01T08:57:49.000Z" title="发表于 2022-11-01 16:57:49">2022-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/21/Less/" title="Less"><img src="https://static001.geekbang.org/resource/image/37/e4/37fbe168a471e8ee1267fd741d096fe4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Less"/></a><div class="content"><a class="title" href="/2022/10/21/Less/" title="Less">Less</a><time datetime="2022-10-21T08:57:49.000Z" title="发表于 2022-10-21 16:57:49">2022-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/11/JavaScript%E5%AE%9E%E7%8E%B0%E6%A0%88%E7%BB%93%E6%9E%84%EF%BC%88Stack%EF%BC%89/" title="JavaScript实现栈结构（Stack）"><img src="https://static001.geekbang.org/resource/image/9f/28/9f68cbdfd275739a1cd3a4dfa85ead28.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript实现栈结构（Stack）"/></a><div class="content"><a class="title" href="/2022/07/11/JavaScript%E5%AE%9E%E7%8E%B0%E6%A0%88%E7%BB%93%E6%9E%84%EF%BC%88Stack%EF%BC%89/" title="JavaScript实现栈结构（Stack）">JavaScript实现栈结构（Stack）</a><time datetime="2022-07-11T02:23:20.000Z" title="发表于 2022-07-11 10:23:20">2022-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/10/JavaScript%E5%AE%9E%E7%8E%B0%E6%A0%91%E7%BB%93%E6%9E%84/" title="树结构简介"><img src="https://static001.geekbang.org/resource/image/9f/28/9f68cbdfd275739a1cd3a4dfa85ead28.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="树结构简介"/></a><div class="content"><a class="title" href="/2022/07/10/JavaScript%E5%AE%9E%E7%8E%B0%E6%A0%91%E7%BB%93%E6%9E%84/" title="树结构简介">树结构简介</a><time datetime="2022-07-10T02:23:20.000Z" title="发表于 2022-07-10 10:23:20">2022-07-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Aiolimp</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>